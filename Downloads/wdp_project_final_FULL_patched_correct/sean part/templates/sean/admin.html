<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - Re:Connect SG</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">


  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}" />
  <link rel="stylesheet" href="{{ request.script_root }}/static/css/global_navbar.css">
</head>

<body data-logged-in="{{ '1' if session.get('user_id') else '0' }}">
<div class="global-topbar" id="reconnect-global-navbar">
  <div class="brand">Re:Connect Global</div>
  <div class="actions">
    <button type="button" id="global-notif-btn">Notifications <span class="badge" id="global-notif-badge">0</span></button>
    <button type="button" id="global-chatbot-btn">Chatbot</button>
    <button type="button" id="global-access-btn">Accessibility</button>
  </div>
  <div class="panel" id="global-notif-panel">
    <header>Notifications</header>
    <div class="panel-body" id="global-notif-list">
      <div class="item">No notifications yet.</div>
    </div>
  </div>
  <div class="panel" id="global-chatbot-panel">
    <header>FAQ Chatbot</header>
    <div class="panel-body">
      <div id="global-chatbot-log" style="max-height:160px; overflow:auto;"></div>
      <form id="global-chatbot-form" class="chatbot-input">
        <input id="global-chatbot-input" type="text" placeholder="Ask a question...">
        <button type="submit">Send</button>
      </form>
    </div>
  </div>
  <div class="panel" id="global-access-panel">
    <header>Accessibility</header>
    <div class="panel-body">
      <div class="item">Use browser zoom for text size.</div>
      <div class="item">High contrast mode: Alt + Shift + H.</div>
      <div class="item">Keyboard navigation supported.</div>
    </div>
  </div>
</div>

  <div class="accessibility-bar" style="margin-bottom: 12px;">
    <div class="container d-flex align-items-center">
      <button id="back-btn" class="back-btn btn-auth" onclick="window.location.href='/dashboard'">Back to Dashboard</button>
      <div class="accessibility-controls d-flex align-items-center">
        <a class="accessibility-btn admin-switch btn-auth" href="/sean/sean/dashboard">Exit Admin</a>
        <button class="accessibility-btn btn-auth" id="font-size-btn"><span>A</span><span style="font-size:1.2em;">A</span></button>
        <button class="accessibility-btn btn-auth" id="contrast-btn">‚óê</button>
        <button class="accessibility-btn btn-auth" id="lang-btn">üåê</button>
      </div>
    </div>
  </div>


  <nav class="navbar">
    <div class="container d-flex align_toggle-items-center">
      <a href="/" class="logo">
        <div class="logo-circle"></div>
        <span class="logo-text">Re:Connect SG</span>
      </a>

      <ul class="nav-links">
        <li><a href="/sean/sean/dashboard">Home</a></li>
        <li><a href="/sean/sean/messages">Messages</a></li>
        <li><a href="/sean/sean/admin" class="active">Admin</a></li>
        <li><a href="{{ url_for('logout_page') }}">Sign Out</a></li>
      </ul>
    </div>
  </nav>

  <main class="admin-main">
    <div class="container">
      <header class="admin-hero">
        <div>
          <p class="admin-kicker">Operations Center</p>
          <h1>Admin Console</h1>
          <p class="admin-subtitle">Monitor safety, guide matching quality, and keep the community healthy.</p>
        </div>
        <div class="admin-hero-actions">
          <button class="btn btn-outline-orange btn-auth" data-action="Create report">Create Report</button>
          <button class="btn btn-teal btn-auth" data-action="Open incident">Open Incident</button>
        </div>
      </header>

      <section class="admin-stats">
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-label">Active Matches</span>
            <span class="stat-pill teal">+8% this week</span>
          </div>
          <div class="stat-value">284</div>
          <p class="stat-note">Youth and seniors chatting now</p>
        </div>
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-label">Open Safety Flags</span>
            <span class="stat-pill orange">12 new</span>
          </div>
          <div class="stat-value">41</div>
          <p class="stat-note">Review within 24 hours</p>
        </div>
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-label">Response Time</span>
            <span class="stat-pill success">On track</span>
          </div>
          <div class="stat-value">2h 18m</div>
          <p class="stat-note">Avg. time to first response</p>
        </div>
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-label">Community Pulse</span>
            <span class="stat-pill info">Stable</span>
          </div>
          <div class="stat-value">92%</div>
          <p class="stat-note">Positive feedback score</p>
        </div>
      </section>

      <section class="admin-grid">
        <div class="admin-panel">
          <div class="panel-header">
            <div>
              <h2>Moderation Queue</h2>
              <p>Priority items needing review</p>
            </div>
            <button class="btn btn-outline-orange btn-auth" data-action="View moderation queue">View All</button>
          </div>

          <div class="table-wrap">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Case</th>
                  <th>Type</th>
                  <th>Reporter</th>
                  <th>Users</th>
                  <th>Status</th>
                  <th>Updated</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="reports-table"></tbody>
            </table>
          </div>
        </div>

        <div class="admin-side">
          <div class="admin-panel compact">
            <div class="panel-header">
              <div>
                <h2>System Health</h2>
                <p>Live platform indicators</p>
              </div>
            </div>

            <div class="health-grid">
              <div class="health-card">
                <div class="health-title">API Status</div>
                <div class="health-value ok">Operational</div>
                <div class="health-note">99.9% uptime</div>
              </div>
              <div class="health-card">
                <div class="health-title">Message Queue</div>
                <div class="health-value warn">Delayed</div>
                <div class="health-note">3m behind</div>
              </div>
              <div class="health-card">
                <div class="health-title">Storage</div>
                <div class="health-value ok">Healthy</div>
                <div class="health-note">62% used</div>
              </div>
              <div class="health-card">
                <div class="health-title">Safety Filters</div>
                <div class="health-value ok">Running</div>
                <div class="health-note">Updated today</div>
              </div>
            </div>
          </div>

          <div class="admin-panel compact">
            <div class="panel-header">
              <div>
                <h2>Quick Actions</h2>
                <p>Shortcuts for daily ops</p>
              </div>
            </div>

            <div class="action-grid">
              <button class="action-tile" data-action="Approve profiles">Approve Profiles</button>
              <button class="action-tile" data-action="Export reports">Export Reports</button>
              <button class="action-tile" data-action="Message broadcast">Message Broadcast</button>
              <button class="action-tile" data-action="Update FAQ">Update FAQ</button>
            </div>
          </div>
        </div>
      </section>

      <section class="admin-panel admin-messaging">
        <div class="panel-header">
          <div>
            <h2>Message Review</h2>
            <p>Queue and live conversation checks</p>
          </div>
          <button class="btn btn-outline-orange btn-auth" data-action="Open inbox">Open Inbox</button>
        </div>

        <div class="admin-messaging-grid">
          <aside class="review-queue">
            <div class="queue-header">
              <h3>Flagged Threads</h3>
              <span class="queue-count">18 pending</span>
            </div>
            <div class="queue-search">
              <input type="text" placeholder="Search case or user" />
            </div>
            <div class="queue-list" id="report-queue"></div>
          </aside>

          <section class="review-panel">
            <div class="review-header">
              <div>
                <h3 id="report-case">Select a report</h3>
                <p id="report-meta">Pick a report from the queue to review details.</p>
              </div>
              <div class="review-actions">
                <button class="btn btn-outline-orange btn-auth" id="report-edit-btn">Edit</button>
                <button class="btn btn-teal btn-auth" id="report-resolve-btn">Resolve</button>
              </div>
            </div>

            <div class="review-messages">
              <div class="report-summary-card">
                <div class="report-summary-title">Summary</div>
                <p id="report-summary">No report selected.</p>
              </div>
            </div>

            <div class="review-toolbar">
              <div class="toolbar-left">
                <span class="status-chip" id="report-status-chip">Status</span>
                <span class="status-chip" id="report-type-chip">Type</span>
              </div>
              <div class="toolbar-right">
                <button class="btn btn-outline-orange btn-auth" id="report-delete-btn">Delete</button>
                <button class="btn btn-teal btn-auth" id="report-close-btn">Close Case</button>
              </div>
            </div>
          </section>
        </div>
      </section>

      <section class="admin-panel">
        <div class="panel-header">
          <div>
            <h2>Language Safety</h2>
            <p>Filter the word list by severity</p>
          </div>
          <div class="panel-actions">
            <button class="btn btn-outline-orange btn-auth" id="add-profanity-btn">Add Word</button>
            <button class="btn btn-outline-orange btn-auth" data-action="Export word list">Export List</button>
          </div>
        </div>
        <div class="filter-tabs" role="tablist">
          <button class="filter-tab active" data-filter="all">All</button>
          <button class="filter-tab" data-filter="mild">Mild</button>
          <button class="filter-tab" data-filter="strong">Strong</button>
          <button class="filter-tab" data-filter="extreme">Extreme</button>
        </div>
        <div class="curse-list" id="curse-list"></div>
      </section>

      <section class="admin-panel">
        <div class="panel-header">
          <div>
            <h2>Recent Activity</h2>
            <p>What changed in the last 24 hours</p>
          </div>
          <button class="btn btn-outline-orange btn-auth" data-action="Download log">Download Log</button>
        </div>
        <div class="activity-list">
          <div class="activity-item">
            <div class="activity-dot teal"></div>
            <div>
              <h4>Match quality score updated</h4>
              <p>Model recalibrated for lower false positives.</p>
            </div>
            <span class="activity-time">1 hour ago</span>
          </div>
          <div class="activity-item">
            <div class="activity-dot orange"></div>
            <div>
              <h4>Safety review escalated</h4>
              <p>Case #MC-229 moved to priority queue.</p>
            </div>
            <span class="activity-time">2 hours ago</span>
          </div>
          <div class="activity-item">
            <div class="activity-dot success"></div>
            <div>
              <h4>New moderation policy published</h4>
              <p>Updated response targets for high-risk flags.</p>
            </div>
            <span class="activity-time">Yesterday</span>
          </div>
        </div>
      </section>
    </div>
  </main>

  <div class="admin-toast" id="admin-toast" role="status"></div>
  <div class="ui-modal" id="ui-modal">
    <div class="ui-modal-card">
      <div class="ui-modal-header">
        <h3 id="ui-modal-title">Title</h3>
        <button class="ui-modal-close" id="ui-modal-close">‚úñ</button>
      </div>
      <div class="ui-modal-body" id="ui-modal-body"></div>
      <div class="ui-modal-actions" id="ui-modal-actions"></div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/accessibility.js') }}"></script>
  <script src="{{ url_for('static', filename='js/admin.js') }}"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ request.script_root }}/static/js/global_navbar.js"></script>
</body>
</html>
