<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Re:Connect SG</title>
  <link rel="stylesheet" href="/static/ryan/css/styles.css">
  <link rel="stylesheet" href="/static/ryan/css/dashboard.css">
  <link rel="stylesheet" href="/static/ryan/css/tabs.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/ryan/css/messages.css">
  <link rel="stylesheet" href="/static/ryan/css/matching.css">


  <link rel="stylesheet" href="/static/shared/dialogs.css">
</head>

<body>
  <!-- Accessibility Controls -->
  <div class="accessibility-fab">
    <button class="accessibility-orb" id="accessibility-toggle" aria-expanded="false" aria-controls="accessibility-panel" title="Accessibility options">
      ‚ôø
    </button>
    <div class="accessibility-panel" id="accessibility-panel">
      <button class="accessibility-btn" id="font-size-btn" title="Adjust Text Size">
        <span>A</span><span style="font-size: 1.1em;">A</span>
      </button>
      <button class="accessibility-btn" id="contrast-btn" title="Toggle High Contrast">‚óê</button>
      <button class="accessibility-btn" id="lang-btn" title="Change Language">üåê</button>
    </div>
  </div>

  <!-- Main Dashboard -->
  <div id="main-dashboard" class="main-dashboard">
    <!-- Top Navbar -->
    <nav class="navbar">
      <div class="container">
        <a href="/" class="logo">
          <div class="logo-circle"></div>
          <span class="logo-text">Re:Connect SG</span>
        </a>

        <ul class="nav-links">
          <li><a href="/ryan/dashboard" class="active">Home</a></li>
          <li class="notification-menu">
            <button class="notification-btn" id="notif-btn">
              <span class="notification-icon">üîî</span>
              <span class="notification-badge">0</span>
            </button>
          </li>
          <li><a href="/ryan/messages">Messages</a></li>
          <li class="profile-menu">
            <a href="/ryan/profile" class="profile-link">
              <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah" alt="Profile" class="nav-avatar">
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Dashboard Content -->
    <main class="dashboard-main">
      <div class="container" style="max-width: 1200px;">
        <div class="page-back-row">
          <button type="button" class="page-back-btn" onclick="window.location.href='/'">‚Üê Back to Home</button>
        </div>

        <section class="welcome-section">
          <div class="welcome-copy">
            <h1>Welcome back, User! <span class="welcome-wave">√∞≈∏‚Äò‚Äπ</span></h1>
            <p>Ready to make someone's day brighter?</p>
          </div>
          <div class="stats-grid">
            <div class="stat-card stat-card-primary">
              <div class="stat-icon">&#127941;</div>
              <div class="stat-value">145</div>
              <div class="stat-label">Re:Points</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon stat-icon-teal">&#128101;</div>
              <div class="stat-value">3</div>
              <div class="stat-label">Connections</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon stat-icon-teal">&#128218;</div>
              <div class="stat-value">5</div>
              <div class="stat-label">Circles Joined</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon stat-icon-orange">&#11088;</div>
              <div class="stat-value">4</div>
              <div class="stat-label">Badges Earned</div>
            </div>
          </div>
        </section>

        <!-- Dashboard Tabs -->
        <div class="dashboard-tabs">
          <div class="tabs-nav">
            <button class="tab-button active" data-tab="matches">
              <span class="tab-icon">ü§ù</span>
              Matches
            </button>
            <button class="tab-button" data-tab="wisdom-forum">
              <span class="tab-icon">üí°</span>
              Wisdom Forum
            </button>
            <button class="tab-button" data-tab="learning-circles">
              <span class="tab-icon">üìö</span>
              Learning Circles
            </button>
            <button class="tab-button" data-tab="challenges">
              <span class="tab-icon">üèÜ</span>
              Weekly Challenges
            </button>
            <button class="tab-button" data-tab="achievements">
              <span class="tab-icon">üèÖ</span>
              Achievements
            </button>
            
          </div>
        </div>

                <!-- Tab Content: Matches -->
        <div class="tab-content active" id="tab-matches">
          <div class="matches-overview">
            <div class="matches-overview-header">
              <h3>Your Matches</h3>
              <button class="btn btn-orange" id="discoverBtn">Discover</button>
            </div>
            <div id="matchesGrid" class="matches-grid"></div>
          </div>
          <div class="header matches-header hidden" id="matchesHeader">
            <button class="header-btn" id="matchesBtn">‚ù§Ô∏è <span id="matchCount">0</span> Matches</button>
            <button class="header-btn" id="resetBtn">üîÑ Reset</button>
          </div>

          <div class="main-content" id="discoverPanel" style="display:none;">
            <div class="card" id="card">
              <div class="card-header" id="cardHeader">
                <img class="avatar" src="" alt="Profile Avatar" />
                <div class="header-info">
                  <h2 class="name"></h2>
                  <div class="location-availability">
                    <span>üìç <span class="location"></span></span>
                    <span>üïê Available now</span>
                  </div>
                </div>
                <div class="match-badge">
                  <span class="match-value"></span> Match
                </div>
              </div>

              <div class="bio"></div>

              <div class="card-content">
                <div class="section">
                  <div class="section-title">Why We Matched</div>
                  <div class="tags" id="matchedTags"></div>
                </div>

                <div class="two-column">
                  <div class="section interests-section">
                    <div class="section-title">Interests</div>
                    <div class="tags" id="interestTags"></div>
                  </div>

                  <div class="section goals-section">
                    <div class="section-title">Goals</div>
                    <ul class="goals-list" id="goalsList"></ul>
                  </div>
                </div>

                <div class="two-column">
                  <div class="section teach-section">
                    <div class="section-title">Can Teach You</div>
                    <div class="tags" id="teachTags"></div>
                  </div>

                  <div class="section learn-section">
                    <div class="section-title">Wants to Learn</div>
                    <div class="tags" id="learnTags"></div>
                  </div>
                </div>
              </div>

              <div class="actions">
                <button class="action-btn action-pass" id="passBtn">‚úñ Pass</button>
                <button class="action-btn action-connect" id="connectBtn">‚ù§Ô∏è Connect</button>
              </div>
            </div>
          </div>

          <div class="match-modal" id="matchModal">
            <div class="match-content">
              <div class="match-icon">‚ù§Ô∏è</div>
              <h2>It's a Match!</h2>
              <p>You and <span id="matchedName"></span> want to connect!</p>
              <div class="match-buttons">
                <button class="modal-btn send-message-btn" id="sendMessageBtn">üí¨ Send Message</button>
                <button class="modal-btn keep-swiping-btn" id="keepSwipingBtn">Keep Swiping</button>
              </div>
            </div>
          </div>

          <div class="matches-modal" id="matchesModal">
            <div class="matches-content">
              <div class="matches-header">
                <h2>Your Matches</h2>
                <button class="close-btn" id="closeMatchesBtn">‚úñ</button>
              </div>
              <p class="matches-subtitle">
                <span id="matchesCount">0</span> connections ready to chat
              </p>
              <div id="matchesList"></div>
            </div>
          </div>

        </div>

        <!-- Tab Content: Wisdom Forum -->
        <div class="tab-content" id="tab-wisdom-forum">
          <div class="section-header" style="margin-bottom: 2rem;">
            <h2>Wisdom Forum</h2>
            <p>Explore posts and share your knowledge with the community</p>
          </div>

          <div class="wisdom-card" style="background: white; border: 2px solid #e5e7eb; border-radius: 1.25rem; padding: 1.5rem; margin-bottom: 2rem;">
            <h3 style="margin-bottom: 1rem;">Share Your Wisdom</h3>
            <form method="post" action="/ryan/dashboard#tab-wisdom-forum">
              <input type="text" name="title" placeholder="Topic Title" required style="width: 100%; padding: 0.8rem; margin-bottom: 0.5rem; border: 1px solid #ddd; border-radius: 0.5rem;">

              <select name="category" required style="width: 100%; padding: 0.8rem; margin-bottom: 0.5rem; border: 1px solid #ddd; border-radius: 0.5rem; background: white;">
                <option value="" disabled selected>Select Category</option>
                <option value="Money">üí∞ Money</option>
                <option value="Career">üíº Career</option>
                <option value="Relationships">‚ù§Ô∏è Relationships</option>
                <option value="Life Skills">üõ†Ô∏è Life Skills</option>
                <option value="Health">üè• Health</option>
              </select>

              <textarea name="content" placeholder="Share your wisdom..." required style="width: 100%; padding: 0.8rem; margin-bottom: 0.5rem; border: 1px solid #ddd; border-radius: 0.5rem; height: 100px;"></textarea>
              <button type="submit" style="padding: 0.75rem 2rem; background: var(--orange); color: white; border: none; border-radius: 0.75rem; font-weight: 600; cursor: pointer;">Post to Forum</button>
            </form>
          </div>

          <div class="filter-bar" style="margin-bottom: 1.5rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
            {% for cat in ['all', 'Money', 'Career', 'Relationships', 'Life Skills', 'Health'] %}
              <a href="/ryan/dashboard?filter={{ cat }}#tab-wisdom-forum"
                 class="filter-chip {{ 'active' if selected_category == cat else '' }}"
                 style="text-decoration: none; padding: 8px 16px; border-radius: 20px; border: 1px solid #ddd; color: #475569;">
                {{ cat.title() }}
              </a>
            {% endfor %}
          </div>

          <div class="wisdom-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; align-items: stretch;">
            {% if posts %}
              {% for post in posts %}
              <div class="wisdom-card" style="background: white; border: 2px solid #e5e7eb; border-radius: 1.25rem; padding: 1.5rem; display: flex; flex-direction: column; height: 100%;">

                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                  <span style="font-size: 1.5rem;">üí°</span>
                  <span style="background: #eff6ff; color: #1d4ed8; padding: 4px 12px; border-radius: 999px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; border: 1px solid #dbeafe;">
                    {{ post.category }}
                  </span>
                </div>

                <h3 style="font-size: 1.25rem; margin-bottom: 0.25rem; color: #1e293b;">{{ post.title }}</h3>
                <p style="font-size: 0.8rem; color: #94a3b8; margin-bottom: 0.75rem;">‚úçÔ∏è By: <strong>{{ post.author }}</strong></p>

                <p style="color: #64748b; font-size: 0.95rem; margin-bottom: 1.5rem; line-height: 1.5; flex-grow: 1;">
                  {{ post.content[:100] }}{% if post.content|length > 100 %}...{% endif %}
                </p>

                <div style="margin-top: auto;">
                  <div style="display: flex; align-items: center; justify-content: space-between; border-top: 1px solid #f1f5f9; padding-top: 1rem; margin-bottom: 1rem;">
                    <div style="display: flex; gap: 1rem; align-items: center;">
                      <form action="/ryan/forum/posts/{{ post.id }}/like#tab-wisdom-forum" method="post" style="display: inline;">
                        <button type="submit" style="background: #fff1f2; border: 1px solid #fecdd3; color: #e11d48; padding: 4px 10px; border-radius: 8px; cursor: pointer; font-size: 0.85rem; display: flex; align-items: center; gap: 4px;">
                          ‚ù§Ô∏è {{ post.likes }}
                        </button>
                      </form>
                      <span style="color: #94a3b8; font-size: 0.85rem;">üí¨ {{ post.comment_count }}</span>
                    </div>
                    <span style="color: #94a3b8; font-size: 0.75rem;">{{ post.created_at }}</span>
                  </div>

                  {% if is_admin or forum_user_name == post.author %}
                  <div class="wisdom-controls" style="margin-top: 10px; border-top: 1px dashed #cbd5e1; padding-top: 10px; display: flex; gap: 10px; justify-content: center;">
                    <form action="/ryan/forum/posts/{{ post.id }}/delete#tab-wisdom-forum" method="POST" style="display:inline;" onsubmit="return confirmDeletion()">
                      <button type="submit"
                              style="background: #fee2e2; color: #dc2626; border: 1px solid #fecaca; padding: 4px 12px; border-radius: 8px; cursor: pointer; font-size: 0.85rem; font-weight: 600;">
                        üóëÔ∏è Delete
                      </button>
                    </form>

                    {% if forum_user_name == post.author %}
                    <button onclick="simpleEdit('{{ post.id }}', this.getAttribute('data-content'))"
                            data-content="{{ post.content | e }}"
                            style="background: #eff6ff; color: #2563eb; border: 1px solid #dbeafe; padding: 4px 12px; border-radius: 8px; cursor: pointer; font-size: 0.85rem; font-weight: 600;">
                      ‚úèÔ∏è Edit
                    </button>
                    {% endif %}
                  </div>
                  {% endif %}

                  <a href="/ryan/forum/posts/{{ post.id }}" style="display: inline-block; width: 100%; padding: 0.75rem; text-align: center; background: var(--orange); color: white; border-radius: 0.75rem; font-weight: 600; text-decoration: none;">
                    View & Comment
                  </a>
                </div>
              </div>
              {% endfor %}
            {% else %}
              <p style="text-align: center; color: #64748b; font-style: italic;">No posts yet. Be the first to share!</p>
            {% endif %}
          </div>
        </div>
<!-- Tab Content: Learning Circles -->
        <div class="tab-content" id="tab-learning-circles">
          <div class="section-header" style="margin-bottom: 2rem;">
            <h2>Learning Circles</h2>
            <p>Join group sessions to teach and learn together</p>
          </div>

          <div class="circles-grid"
            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
            <!-- Circle Card 1 -->
            <div class="circle-card"
              style="background: white; border-radius: 1.25rem; padding: 1.5rem; border: 2px solid var(--border-color);">
              <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                <span style="font-size: 2rem;">üì±</span>
                <div>
                  <span
                    style="background: #3b82f6; color: white; padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600;">TEACH
                    ME TECH</span>
                </div>
              </div>
              <h3 style="font-size: 1.125rem; font-weight: 700; margin-bottom: 0.5rem;">WhatsApp Basics for Seniors</h3>
              <p style="color: var(--muted-foreground); margin-bottom: 1rem;">Learn to send messages, photos, and voice
                notes with confidence.</p>

              <div style="display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem;">
                <div
                  style="display: flex; align-items: center; gap: 0.5rem; color: var(--muted-foreground); font-size: 0.875rem;">
                  <span>üìÖ</span>
                  <span>Today, 3:00 PM</span>
                </div>
                <div
                  style="display: flex; align-items: center; gap: 0.5rem; color: var(--muted-foreground); font-size: 0.875rem;">
                  <span>‚è±Ô∏è</span>
                  <span>1 hour</span>
                </div>
                <div
                  style="display: flex; align-items: center; gap: 0.5rem; color: var(--muted-foreground); font-size: 0.875rem;">
                  <span>üë•</span>
                  <span>8 / 12 participants</span>
                </div>
              </div>

              <button type="button"
                style="width: 100%; padding: 0.75rem; background: var(--orange); color: white; border: none; border-radius: 0.75rem; font-weight: 600; cursor: pointer;"
                onclick="joinCircle('WhatsApp Basics for Seniors', 'Today, 3:00 PM', '1 hour')">
                Join Circle
              </button>


            </div>

            <!-- Circle Card 2 -->
            <div class="circle-card"
              style="background: white; border-radius: 1.25rem; padding: 1.5rem; border: 2px solid var(--border-color);">
              <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                <span style="font-size: 2rem;">üí°</span>
                <div>
                  <span
                    style="background: #f59e0b; color: white; padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600;">WISDOM
                    HOUR</span>
                </div>
              </div>
              <h3 style="font-size: 1.125rem; font-weight: 700; margin-bottom: 0.5rem;">Stories from 1960s Singapore
              </h3>
              <p style="color: var(--muted-foreground); margin-bottom: 1rem;">Hear firsthand accounts of Singapore's
                kampong days and nation-building years.</p>

              <div style="display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem;">
                <div
                  style="display: flex; align-items: center; gap: 0.5rem; color: var(--muted-foreground); font-size: 0.875rem;">
                  <span>üìÖ</span>
                  <span>Tomorrow, 10:00 AM</span>
                </div>
                <div
                  style="display: flex; align-items: center; gap: 0.5rem; color: var(--muted-foreground); font-size: 0.875rem;">
                  <span>‚è±Ô∏è</span>
                  <span>1.5 hours</span>
                </div>
                <div
                  style="display: flex; align-items: center; gap: 0.5rem; color: var(--muted-foreground); font-size: 0.875rem;">
                  <span>üë•</span>
                  <span>15 / 20 participants</span>
                </div>
              </div>
              <button type="button"
                style="width: 100%; padding: 0.75rem; background: var(--teal); color: white; border: none; border-radius: 0.75rem; font-weight: 600; cursor: pointer;"
                onclick="joinCircle('Stories from 1960s Singapore', 'Tomorrow, 10:00 AM', '1.5 hours')">
                Join Circle
              </button>


            </div>

            <!-- Circle Card 3 -->
            <div class="circle-card"
              style="background: white; border-radius: 1.25rem; padding: 1.5rem; border: 2px solid var(--border-color);">
              <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                <span style="font-size: 2rem;">üó£Ô∏è</span>
                <div>
                  <span
                    style="background: #8b5cf6; color: white; padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600;">LANGUAGE
                    BRIDGES</span>
                </div>
              </div>
              <h3 style="font-size: 1.125rem; font-weight: 700; margin-bottom: 0.5rem;">Hokkien 101: Basic Phrases</h3>
              <p style="color: var(--muted-foreground); margin-bottom: 1rem;">Learn common Hokkien phrases used in
                everyday Singapore life.</p>

              <div style="display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem;">
                <div
                  style="display: flex; align-items: center; gap: 0.5rem; color: var(--muted-foreground); font-size: 0.875rem;">
                  <span>üìÖ</span>
                  <span>Friday, 7:00 PM</span>
                </div>
                <div
                  style="display: flex; align-items: center; gap: 0.5rem; color: var(--muted-foreground); font-size: 0.875rem;">
                  <span>‚è±Ô∏è</span>
                  <span>1 hour</span>
                </div>
                <div
                  style="display: flex; align-items: center; gap: 0.5rem; color: var(--muted-foreground); font-size: 0.875rem;">
                  <span>üë•</span>
                  <span>6 / 10 participants</span>
                </div>
              </div>

              <button type="button"
                style="width: 100%; padding: 0.75rem; background: var(--orange); color: white; border: none; border-radius: 0.75rem; font-weight: 600; cursor: pointer;"
                onclick="joinCircle('Hokkien 101: Basic Phrases', 'Friday, 7:00 PM', '1 hour')">
                Join Circle
              </button>

            </div>
          </div>
        </div>

        <!-- Tab Content: Weekly Challenges -->
        <div class="tab-content" id="tab-challenges">
          <div class="section-header" style="margin-bottom: 2rem;">
            <h2>Weekly Challenges</h2>
            <p>Participate in fun activities and earn Re:Points</p>
          </div>

          <div
            style="background: white; border-radius: 1.5rem; padding: 2rem; border: 2px solid var(--orange); margin-bottom: 2rem;">
            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.5rem;">
              <div>
                <h2 style="font-size: 1.75rem; font-weight: 700; margin-bottom: 0.5rem;">üçú Recreate Your Childhood
                  Snack</h2>
                <p style="color: var(--muted-foreground);">Week 12 Challenge</p>
              </div>
              <div
                style="background: var(--orange); color: white; padding: 0.5rem 1rem; border-radius: 999px; font-weight: 700;">
                +20 Points
              </div>
            </div>

            <p style="color: var(--foreground); margin-bottom: 1rem; line-height: 1.6;">
              Share a photo or video of yourself making a snack you loved as a child. Tell us the story behind it -
              where you first had it, who introduced you to it, and what memories it brings back!
            </p>

            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
              <div style="background: var(--muted); padding: 1rem; border-radius: 0.75rem; text-align: center;">
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--orange); margin-bottom: 0.25rem;">3 days
                </div>
                <div style="font-size: 0.875rem; color: var(--muted-foreground);">Deadline</div>
              </div>
              <div style="background: var(--muted); padding: 1rem; border-radius: 0.75rem; text-align: center;">
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--teal); margin-bottom: 0.25rem;">127</div>
                <div style="font-size: 0.875rem; color: var(--muted-foreground);">Participants</div>
              </div>
              <div style="background: var(--muted); padding: 1rem; border-radius: 0.75rem; text-align: center;">
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--foreground); margin-bottom: 0.25rem;">84
                </div>
                <div style="font-size: 0.875rem; color: var(--muted-foreground);">Submissions</div>
              </div>
            </div>

            <button
              style="width: 100%; padding: 1rem; background: var(--orange); color: white; border: none; border-radius: 0.75rem; font-weight: 600; font-size: 1.125rem; cursor: pointer;">
              Submit Your Entry
            </button>
          </div>

          <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem;">Recent Submissions</h3>
          <div style="display: grid; gap: 1rem;">
            <!-- Submission 1 -->
            <div
              style="background: white; border-radius: 1rem; padding: 1.5rem; border: 2px solid var(--border-color);">
              <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Uncle" alt="Uncle Tan"
                  style="width: 48px; height: 48px; border-radius: 50%; border: 2px solid var(--orange);">
                <div>
                  <div style="font-weight: 700;">Uncle Tan & Lisa</div>
                  <div style="font-size: 0.875rem; color: var(--muted-foreground);">2 hours ago</div>
                </div>
              </div>
              <p style="margin-bottom: 1rem; line-height: 1.6;">
                "We made traditional kueh lapis together! Uncle Tan taught me his mother's secret recipe from the 1950s.
                It took 3 hours but so worth it! ü•∞"
              </p>
              <div style="display: flex; gap: 1rem; color: var(--muted-foreground); font-size: 0.875rem;">
                <span>‚ù§Ô∏è 24</span>
                <span>üí¨ 8</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab Content: Achievements -->
        <div class="tab-content" id="tab-achievements">
          <div class="section-header" style="margin-bottom: 2rem;">
            <h2>Achievements</h2>
            <p>Track your milestones, quests, and rewards in your gamification hub.</p>
          </div>

          <div style="background: white; border-radius: 1.5rem; padding: 2rem; border: 2px solid var(--border-color);">
            <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 0.75rem;">Your Achievements Hub</h3>
            <p style="color: var(--muted-foreground); margin-bottom: 1.5rem;">
              View your badges, quests, and progress map in one place.
            </p>
            <a href="/ryan/achievements" class="btn btn-orange">See your achievements</a>
          </div>
        </div>

        

      </div>
    </main>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav">
      <a href="/ryan/dashboard" class="bottom-nav-item active">
        <span class="nav-icon">üè†</span>
        <span class="nav-label">Home</span>
      </a>
      <a href="/ryan/explore" class="bottom-nav-item">
        <span class="nav-icon">üîç</span>
        <span class="nav-label">Explore</span>
      </a>
      <a href="/ryan/messages" class="bottom-nav-item">
        <span class="nav-icon">üí¨</span>
        <span class="nav-label">Messages</span>
      </a>
      <a href="/ryan/profile" class="bottom-nav-item">
        <span class="nav-icon">üë§</span>
        <span class="nav-label">Profile</span>
      </a>
    </nav>
  </div>

  <!-- Notifications Dropdown -->
  <div class="notifications-dropdown" id="notifications-dropdown">
    <div class="notifications-header">
      <h3>Notifications</h3>
      <button class="mark-read-btn">Mark all as read</button>
    </div>
    <div class="notifications-list">
      <div class="notification-item unread">
        <div class="notif-icon orange">üí¨</div>
        <div class="notif-content">
          <p><strong>Mdm Chen</strong> sent you a message</p>
          <span class="notif-time">5 minutes ago</span>
        </div>
      </div>
      <div class="notification-item unread">
        <div class="notif-icon teal">ü§ù</div>
        <div class="notif-content">
          <p><strong>New match found!</strong> You have a 95% match with Uncle Tan</p>
          <span class="notif-time">1 hour ago</span>
        </div>
      </div>
      <div class="notification-item unread">
        <div class="notif-icon success">üèÜ</div>
        <div class="notif-content">
          <p><strong>Badge unlocked:</strong> Hello There</p>
          <span class="notif-time">2 hours ago</span>
        </div>
      </div>
    </div>
    <a href="#" class="view-all-notif">View All Notifications</a>
  </div>

  <!-- Language Modal -->
  <div class="modal" id="lang-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Select Language / ÈÄâÊã©ËØ≠Ë®Ä</h3>
        <button class="close-modal" id="close-lang-modal">√ó</button>
      </div>
      <div class="lang-options">
        <button class="lang-option-big" data-lang="en">
          <span class="lang-flag">üá¨üáß</span>
          <span class="lang-name">English</span>
        </button>
        <button class="lang-option-big" data-lang="zh">
          <span class="lang-flag">üá®üá≥</span>
          <span class="lang-name">‰∏≠Êñá (Chinese)</span>
        </button>
        <button class="lang-option-big" data-lang="ms">
          <span class="lang-flag">üá≤üáæ</span>
          <span class="lang-name">Bahasa Melayu</span>
        </button>
        <button class="lang-option-big" data-lang="ta">
          <span class="lang-flag">üáÆüá≥</span>
          <span class="lang-name">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</span>
        </button>
      </div>
    </div>
  </div>

  <div class="ui-modal" id="ui-modal">
    <div class="ui-modal-card">
      <div class="ui-modal-header">
        <h3 id="ui-modal-title">Title</h3>
        <button class="ui-modal-close" id="ui-modal-close">‚úñ</button>
      </div>
      <div class="ui-modal-body" id="ui-modal-body"></div>
      <div class="ui-modal-actions" id="ui-modal-actions"></div>
    </div>
  </div>

  <script src="/static/ryan/js/dashboard.js"></script>
  <script src="/static/ryan/js/tabs.js"></script>
  <script src="/static/ryan/js/messages.js"></script>
  <script src="/static/ryan/js/matching.js"></script>
  <script src="/static/ryan/js/forum.js"></script>
  <script src="/static/ryan/js/accessibility.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      function activateTab(tabKey) {
        var buttons = document.querySelectorAll('.tab-button');
        var panels = document.querySelectorAll('.tab-content');

        buttons.forEach(function (b) {
          b.classList.toggle('active', b.getAttribute('data-tab') === tabKey);
        });

        panels.forEach(function (p) {
          p.classList.toggle('active', p.id === ('tab-' + tabKey));
        });

        var tabsBar = document.querySelector('.dashboard-tabs');
        if (tabsBar) tabsBar.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }

      document.querySelectorAll('.join-circle-btn').forEach(function (btn) {
        btn.addEventListener('click', function () {
          var target = btn.getAttribute('data-go-tab') || 'challenges';
          activateTab(target);
        });
      });
    });
  </script>


  <script>
    async function joinCircle(title, time, duration) {
      try {
        var res = await fetch('/ryan/api/circle_signup', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ title: title, time: time, duration: duration })
        });

        var out = await res.json().catch(function () { return {}; });
        if (!res.ok) {
          alert(out.error || 'Could not join this circle');
          return;
        }

        window.location.href = '/ryan/circle-confirmation?title=' + encodeURIComponent(title)
          + '&time=' + encodeURIComponent(time)
          + '&duration=' + encodeURIComponent(duration);
      } catch (err) {
        alert('Could not reach the server. Please try again.');
      }
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/static/shared/dialogs.js"></script>
</body>

</html>
