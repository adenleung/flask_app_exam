<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Re:Connect SG</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/reconnect/css/styles.css">
  <link rel="stylesheet" href="/static/reconnect/css/dashboard.css">
  <link rel="stylesheet" href="/static/reconnect/css/tabs.css">
  <link rel="stylesheet" href="/static/reconnect/css/messages.css">
  <link rel="stylesheet" href="/static/reconnect/css/global_navbar.css">
  <link rel="stylesheet" href="/static/shared/dialogs.css">
</head>
<body data-logged-in="{{ '1' if session.get('user_id') else '0' }}">
<div class="global-topbar" id="reconnect-global-navbar">
  <div class="brand">Re:Connect Global</div>
  <div class="actions">
    <button type="button" id="global-notif-btn">Notifications <span class="badge" id="global-notif-badge">0</span></button>
    <button type="button" id="global-chatbot-btn">Chatbot</button>
    <button type="button" id="global-access-btn">Accessibility</button>
  </div>
  <div class="panel" id="global-notif-panel">
    <header>Notifications</header>
    <div class="panel-body" id="global-notif-list">
      <div class="item">No notifications yet.</div>
    </div>
  </div>
  <div class="panel" id="global-chatbot-panel">
    <header>FAQ Chatbot</header>
    <div class="panel-body">
      <div id="global-chatbot-log" style="max-height:160px; overflow:auto;"></div>
      <form id="global-chatbot-form" class="chatbot-input">
        <input id="global-chatbot-input" type="text" placeholder="Ask a question...">
        <button type="submit">Send</button>
      </form>
    </div>
  </div>
  <div class="panel" id="global-access-panel">
    <header>Accessibility</header>
    <div class="panel-body">
      <div class="item">Use browser zoom for text size.</div>
      <div class="item">High contrast mode: Alt + Shift + H.</div>
      <div class="item">Keyboard navigation supported.</div>
    </div>
  </div>
</div>

  <!-- Accessibility Controls -->
  <div class="accessibility-bar">
    <div class="container">
      <button id="back-btn" class="back-btn btn-auth" onclick="window.location.href='/reconnect/dashboard'">â† Back to Dashboard</button>
      <div class="accessibility-controls">
        <button class="accessibility-btn btn-auth" id="font-size-btn" title="Adjust Text Size">
          <span>A</span><span style="font-size: 1.2em;">A</span>
        </button>
        <button class="accessibility-btn btn-auth" id="contrast-btn" title="Toggle High Contrast">
          â—
        </button>
        <button class="accessibility-btn btn-auth" id="lang-btn" title="Change Language">
          ğŸŒ
        </button>
      </div>
    </div>
  </div>

  <!-- Main Dashboard -->
  <div id="main-dashboard" class="main-dashboard">
    <!-- Top Navbar -->
    <nav class="navbar">
      <div class="container">
        <a href="/reconnect/dashboard" class="logo">
          <div class="logo-circle"></div>
          <span class="logo-text">Re:Connect SG</span>
        </a>

        <ul class="nav-links">
          <li><a href="/reconnect/dashboard" class="active">Home</a></li>
          <li class="notification-menu">
            <button class="notification-btn btn-auth" id="notif-btn" type="button">
              <span class="notification-icon">ğŸ””</span>
              <span class="notification-badge">0</span>
            </button>
          </li>
          <li><a href="/reconnect/messages">Messages</a></li>
          <li class="profile-menu">
            <a href="/reconnect/profile" class="profile-link">
              <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah" alt="Profile" class="nav-avatar">
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Dashboard Content -->
    <main class="dashboard-main">
      <div class="container" style="max-width: 1200px;">


        <div class="dashboard-tabs">
  <div class="tabs-nav">
    <button class="tab-button active" data-tab="matches">
      <span class="tab-icon">ğŸ¤</span>
      Matches
    </button>
    <button class="tab-button" data-tab="wisdom-forum">
      <span class="tab-icon">ğŸ’¡</span>
      Wisdom Forum
    </button>
    <button class="tab-button" data-tab="challenges">
      <span class="tab-icon">ğŸ†</span>
      Weekly Challenges
    </button>
    <button class="tab-button" data-tab="badges">
      <span class="tab-icon">â­</span>
      Badges
    </button>
  </div>
</div>

        <!-- Tab Content: Matches -->
        <div class="tab-content active" id="tab-matches">
          <div class="section-header" style="margin-bottom: 2rem;">
            <h2>Your Matches</h2>
            <p>Connect with people who share your interests and goals</p>
          </div>

          <div class="matches-grid">
            <!-- Match Card 1 -->
            <div class="match-card">
              <div class="match-header">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Chen" alt="Mdm Chen" class="match-avatar">
                <div class="match-info">
                  <h3>Mdm Chen Wei Ling</h3>
                  <div class="match-meta">
                    <span class="age-badge">72 years â€¢ Elderly</span>
                  </div>
                </div>
              </div>

              <div class="match-score">
                <span class="match-percentage">95%</span>
                <span style="color: var(--muted-foreground);">match</span>
              </div>

              <div class="match-interests">
                <h4>Shared Interests</h4>
                <div class="interest-tags">
                  <span class="interest-tag">ğŸœ Cooking</span>
                  <span class="interest-tag">ğŸ“š History</span>
                  <span class="interest-tag">ğŸŒ± Gardening</span>
                </div>
              </div>

              <p class="match-bio">
                "I've been cooking traditional Peranakan dishes for over 50 years. Would love to share recipes and stories with the younger generation!"
              </p>

              <button class="say-hi-btn btn-auth">
                <span>Say Hi ğŸ‘‹</span>
              </button>
            </div>

            <!-- Match Card 2 -->
            <div class="match-card">
              <div class="match-header">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Kumar" alt="Mr Kumar" class="match-avatar">
                <div class="match-info">
                  <h3>Mr Kumar Raj</h3>
                  <div class="match-meta">
                    <span class="age-badge">68 years â€¢ Elderly</span>
                  </div>
                </div>
              </div>

              <div class="match-score">
                <span class="match-percentage">88%</span>
                <span style="color: var(--muted-foreground);">match</span>
              </div>

              <div class="match-interests">
                <h4>Shared Interests</h4>
                <div class="interest-tags">
                  <span class="interest-tag">ğŸ’» Technology</span>
                  <span class="interest-tag">ğŸµ Music</span>
                  <span class="interest-tag">ğŸ“¸ Photography</span>
                </div>
              </div>

              <p class="match-bio">
                "Retired engineer who loves learning new tech! Looking for someone to teach me Instagram and help with smartphone features."
              </p>

              <button class="say-hi-btn btn-auth">
                <span>Say Hi ğŸ‘‹</span>
              </button>
            </div>

            <!-- Match Card 3 -->
            <div class="match-card">
              <div class="match-header">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Mary" alt="Auntie Mary" class="match-avatar">
                <div class="match-info">
                  <h3>Auntie Mary Lim</h3>
                  <div class="match-meta">
                    <span class="age-badge">65 years â€¢ Elderly</span>
                  </div>
                </div>
              </div>

              <div class="match-score">
                <span class="match-percentage">92%</span>
                <span style="color: var(--muted-foreground);">match</span>
              </div>

              <div class="match-interests">
                <h4>Shared Interests</h4>
                <div class="interest-tags">
                  <span class="interest-tag">ğŸ¨ Arts & Crafts</span>
                  <span class="interest-tag">ğŸ§¶ Knitting</span>
                  <span class="interest-tag">ğŸ“– Reading</span>
                </div>
              </div>

              <p class="match-bio">
                "Love making traditional crafts and would be happy to teach! Also interested in learning about modern art trends."
              </p>

              <button class="say-hi-btn btn-auth">
                <span>Say Hi ğŸ‘‹</span>
              </button>
            </div>
          </div>
        </div>
        <!-- Tab Content: Wisdom Forum -->
        <div class="tab-content" id="tab-wisdom-forum">
      <div style="background: white; padding: 15px; border-radius: 1rem; margin-bottom: 2rem; border: 1px solid var(--border-color); display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
    <div style="display: flex; align-items: center; gap: 12px;">
        <div style="width: 40px; height: 40px; background: var(--teal); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem;">
            {{ session['user'][0]|upper if session['user'] else 'U' }}
        </div>
        
        <div style="display: flex; align-items: center; gap: 8px;">
            <h4 style="margin: 0; color: var(--text-dark);">Logged in as {{ session['user'] }}:</h4>
            <span style="color: var(--orange); font-weight: 800; font-size: 1rem;">â­ {{ user_points }} Points</span>
        </div>
    </div>
    
    <a href="{{ url_for('reconnect.logout') }}" 
       onclick="sessionStorage.removeItem('hasSeenWelcome');" 
       style="background: rgba(244, 124, 32, 0.12); color: var(--orange); padding: 8px 16px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.9rem;">
        Logout
    </a>
</div>

<style>
    /* Styles for the admin action buttons */
    .admin-controls {
        display: flex; 
        justify-content: center; 
        gap: 15px; 
        padding-top: 10px; 
        border-top: 1px dashed var(--border-color);
        margin-bottom: 10px;
    }
    
    .admin-btn-delete { color: var(--orange); background: none; border: none; cursor: pointer; font-weight: 600; }
    .admin-btn-edit { color: var(--teal); background: none; border: none; cursor: pointer; font-weight: 600; }
</style>
  <div class="forum-hero">
    <div class="forum-hero-inner">
      <a class="forum-back" href="/reconnect/dashboard">? Back to Dashboard</a>
      <div class="forum-title">Wisdom Forum</div>
      <div class="forum-subtitle">Ask life questions, get wisdom from those who've lived it</div>
    </div>
  </div>

  <div class="forum-toolbar">
    <div class="forum-filters">
      {% for cat in ['all', 'Money', 'Career', 'Relationships', 'Life Skills', 'Health'] %}
        <a href="{{ url_for('reconnect.dashboard') }}?filter={{ cat }}#tab-wisdom-forum" class="forum-chip {{ 'active' if selected_category == cat else '' }}">{{ cat.title() }}</a>
      {% endfor %}
    </div>
    <div class="forum-actions">
      <div class="forum-search">
        <input type="text" placeholder="Search questions..." aria-label="Search questions">
      </div>
      <button class="btn btn-auth">Ask Question</button>
    </div>
  </div>

  <div class="forum-share">
    <h3>Share Your Wisdom</h3>
    <form method="post" action="{{ url_for('reconnect.dashboard') }}#tab-wisdom-forum">
      <input type="text" name="title" placeholder="Topic Title" required>
      <select name="category" required>
        <option value="" disabled selected>Select Category</option>
        <option value="Money">Money</option>
        <option value="Career">Career</option>
        <option value="Relationships">Relationships</option>
        <option value="Life Skills">Life Skills</option>
        <option value="Health">Health</option>
      </select>
      <textarea name="content" placeholder="Share your wisdom..." required></textarea>
      <button type="submit" class="btn btn-auth">Post to Forum</button>
    </form>
  </div>

  <div class="forum-posts">
    {% for post in posts %}
    <div class="forum-card">
      <div class="forum-card-header">
        <div class="forum-author">
          <div class="forum-avatar"></div>
          <div>
            <div class="forum-name">{{ post.author }}</div>
            <div class="forum-meta">{{ post.created_at }}</div>
          </div>
        </div>
        <span class="forum-tag">{{ post.category }}</span>
      </div>
      <div class="forum-card-body">
        <h4>{{ post.title }}</h4>
        <p>{{ post.content[:180] }}{% if post.content|length > 180 %}...{% endif %}</p>
      </div>
      <div class="forum-card-footer">
        <div class="forum-stats">
          <form action="{{ url_for('reconnect.like_post', post_id=post.id) }}" method="post">
            <button type="submit" class="forum-like">? {{ post.likes }}</button>
          </form>
          <span class="forum-replies">?? {{ post.comment_count }}</span>
        </div>
        <a href="{{ url_for('reconnect.post_detail', post_id=post.id) }}" class="forum-cta">View & Comment</a>
      </div>
      {% if is_admin or session['user'] == post.author %}
      <div class="forum-admin">
        <form action="{{ url_for('reconnect.delete_post', post_id=post.id) }}" method="POST">
          <button type="submit" class="forum-admin-btn danger">Delete</button>
        </form>
        {% if session['user'] == post.author %}
        <button onclick="simpleEdit('{{ post.id }}', this.getAttribute('data-content'))" data-content="{{ post.content | e }}" class="forum-admin-btn">Edit</button>
        {% endif %}
      </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>
</div>
<div id="tab-challenges" class="tab-content">
  <div class="challenge-hero">
    <div>
      <h2>Weekly Challenges</h2>
      <p>Weekly activities to connect and have fun.</p>
    </div>
  </div>

  {% if session['role'] == 'admin' %}
  <div class="challenge-admin">
    <h3>Create Weekly Challenge</h3>
    <form action="/reconnect/create_challenge" method="POST">
      <input type="text" name="title" placeholder="Challenge Title" required>
      <textarea name="description" placeholder="Instructions..." required></textarea>
      <button type="submit" class="btn btn-auth">Publish Challenge</button>
    </form>
  </div>
  {% endif %}

  {% if challenges %}
    {% for challenge in challenges %}
    <div class="weekly-card">
      <div class="weekly-card-header">
        <div class="weekly-badge">This Week</div>
        <div class="weekly-title">{{ challenge.title }}</div>
        <div class="weekly-desc">{{ challenge.description }}</div>
      </div>
      <div class="weekly-stats">
        <div class="weekly-stat">
          <div class="stat-label">Deadline</div>
          <div class="stat-value">3 days left</div>
        </div>
        <div class="weekly-stat">
          <div class="stat-label">Participants</div>
          <div class="stat-value">{{ all_submissions|length }}</div>
        </div>
        <div class="weekly-stat">
          <div class="stat-label">Submissions</div>
          <div class="stat-value">{{ all_submissions|length }}</div>
        </div>
      </div>
      <div class="weekly-actions">
        {% if session['role'] == 'admin' %}
          <form action="{{ url_for('delete_challenge', challenge_id=challenge.id) }}" method="POST">
            <button type="submit" class="btn btn-outline-teal">Delete Challenge</button>
          </form>
        {% else %}
          {% if challenge.id in user_submissions %}
            <div class="challenge-complete">Challenge Completed</div>
          {% else %}
            <form action="/reconnect/submit_challenge/{{ challenge.id }}" method="POST" enctype="multipart/form-data" class="weekly-form" onsubmit="return validateWordCount(this)">
              <textarea name="answer" placeholder="Write your response here... (Minimum 30 words)" required oninput="updateWordCount(this)"></textarea>
              <div class="word-count-row">Words: <span class="word-count">0</span> / 30</div>
              <input type="file" name="file" accept="image/*">
              <button type="submit" class="btn btn-auth">Submit Your Entry</button>
            </form>
          {% endif %}
        {% endif %}
      </div>
    </div>
    {% endfor %}
  {% else %}
    <div class="empty-state">No active challenges at the moment.</div>
  {% endif %}

  <div class="challenge-gallery">
    <h3>Recent Submissions</h3>
    <div class="gallery-grid">
      {% if all_submissions %}
        {% for sub in all_submissions %}
        <div class="submission-card">
          <div class="submission-header">{{ sub['challenge_name'] }}</div>
          <div class="submission-author">@{{ sub['author'] }}</div>
          {% if sub['image_path'] %}
            <img src="{{ url_for('static', filename='reconnect/uploads/' + sub['image_path']) }}" alt="Submission image">
          {% endif %}
          <p>{{ sub['content'] }}</p>
        </div>
        {% endfor %}
      {% else %}
        <div class="empty-state">No community submissions yet. Be the first to complete a challenge!</div>
      {% endif %}
    </div>
  </div>
</div>

<!-- Tab Content: Badges -->
        <div class="tab-content" id="tab-badges">
          <div class="section-header" style="margin-bottom: 2rem;">
            <h2>Your Badges</h2>
            <p>Earn badges by connecting, learning, and sharing</p>
          </div>

          <div style="background: white; padding: 2rem; border-radius: 1.5rem; margin-bottom: 2rem; border: 2px solid var(--border-color);">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
              <div style="text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 0.5rem;">âœ…</div>
                <div style="font-weight: 700; font-size: 1.25rem; margin-bottom: 0.25rem;">First Step</div>
                <div style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">Created profile</div>
                <div style="background: var(--accent); color: var(--teal); padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; display: inline-block;">UNLOCKED</div>
              </div>

              <div style="text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 0.5rem;">ğŸ‘‹</div>
                <div style="font-weight: 700; font-size: 1.25rem; margin-bottom: 0.25rem;">Hello There</div>
                <div style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">Sent first message</div>
                <div style="background: var(--accent); color: var(--teal); padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; display: inline-block;">UNLOCKED</div>
              </div>

              <div style="text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 0.5rem; opacity: 0.3;">ğŸ“š</div>
                <div style="font-weight: 700; font-size: 1.25rem; margin-bottom: 0.25rem; opacity: 0.5;">Circle Starter</div>
                <div style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">Join your first Learning Circle</div>
                <div style="background: var(--muted); color: var(--muted-foreground); padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; display: inline-block;">ğŸ”’ LOCKED</div>
              </div>

              <div style="text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 0.5rem; opacity: 0.3;">ğŸ†</div>
                <div style="font-weight: 700; font-size: 1.25rem; margin-bottom: 0.25rem; opacity: 0.5;">Challenge Accepted</div>
                <div style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">Complete your first challenge</div>
                <div style="background: var(--muted); color: var(--muted-foreground); padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; display: inline-block;">ğŸ”’ LOCKED</div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </main>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav">
      <a href="/reconnect/dashboard" class="bottom-nav-item active">
        <span class="nav-icon">ğŸ </span>
        <span class="nav-label">Home</span>
      </a>
      <a href="/reconnect/explore" class="bottom-nav-item">
        <span class="nav-icon">ğŸ”</span>
        <span class="nav-label">Explore</span>
      </a>
      <a href="/reconnect/messages" class="bottom-nav-item">
        <span class="nav-icon">ğŸ’¬</span>
        <span class="nav-label">Messages</span>
      </a>
      <a href="/reconnect/profile" class="bottom-nav-item">
        <span class="nav-icon">ğŸ‘¤</span>
        <span class="nav-label">Profile</span>
      </a>
    </nav>
  </div>

  <!-- Notifications Dropdown -->
  <div class="notifications-dropdown" id="notifications-dropdown">
    <div class="notifications-header">
      <h3>Notifications</h3>
      <button class="mark-read-btn btn-auth">Mark all as read</button>
    </div>
    <div class="notifications-list">
      <div class="notification-item unread">
        <div class="notif-icon orange">ğŸ’¬</div>
        <div class="notif-content">
          <p><strong>Mdm Chen</strong> sent you a message</p>
          <span class="notif-time">5 minutes ago</span>
        </div>
      </div>
      <div class="notification-item unread">
        <div class="notif-icon teal">ğŸ¤</div>
        <div class="notif-content">
          <p><strong>New match found!</strong> You have a 95% match with Uncle Tan</p>
          <span class="notif-time">1 hour ago</span>
        </div>
      </div>
      <div class="notification-item unread">
        <div class="notif-icon success">ğŸ†</div>
        <div class="notif-content">
          <p><strong>Badge unlocked:</strong> Hello There</p>
          <span class="notif-time">2 hours ago</span>
        </div>
      </div>
    </div>
    <a href="#" class="view-all-notif">View All Notifications</a>
  </div>

  <!-- Language Modal -->
  <div class="modal" id="lang-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Select Language / é€‰æ‹©è¯­è¨€</h3>
        <button class="close-modal" id="close-lang-modal">Ã—</button>
      </div>
      <div class="lang-options">
        <button class="lang-option-big" data-lang="en">
          <span class="lang-flag">ğŸ‡¬ğŸ‡§</span>
          <span class="lang-name">English</span>
        </button>
        <button class="lang-option-big" data-lang="zh">
          <span class="lang-flag">ğŸ‡¨ğŸ‡³</span>
          <span class="lang-name">ä¸­æ–‡ (Chinese)</span>
        </button>
        <button class="lang-option-big" data-lang="ms">
          <span class="lang-flag">ğŸ‡²ğŸ‡¾</span>
          <span class="lang-name">Bahasa Melayu</span>
        </button>
        <button class="lang-option-big" data-lang="ta">
          <span class="lang-flag">ğŸ‡®ğŸ‡³</span>
          <span class="lang-name">à®¤à®®à®¿à®´à¯ (Tamil)</span>
        </button>
      </div>
    </div>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');

    function switchTab(tabName, opts) {
      const button = document.querySelector(`[data-tab="${tabName}"]`);
      const content = document.getElementById('tab-' + tabName);
      if (!button || !content) return;

      tabButtons.forEach(btn => btn.classList.remove('active'));
      tabContents.forEach(c => c.classList.remove('active'));

      button.classList.add('active');
      content.classList.add('active');

      if (opts && opts.scroll) {
        content.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        switchTab(button.getAttribute('data-tab'), { scroll: false });
      });
    });

    const hash = window.location.hash;
    if (hash && hash.startsWith('#tab-')) {
      switchTab(hash.replace('#tab-', ''), { scroll: true });
    } else if (window.location.search.includes('filter')) {
      switchTab('wisdom-forum', { scroll: true });
    }
  });

  function confirmDeletion() {
    return confirm("Are you sure you want to delete this content?");
  }

  function simpleEdit(postId, currentContent) {
    const newText = prompt("Edit your post content:", currentContent);

    if (newText && newText.trim() !== "" && newText !== currentContent) {
      if (confirm("Save changes to this post?")) {
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = '/reconnect/edit/' + postId + '#tab-wisdom-forum';

        const input = document.createElement('input');
        input.type = 'hidden';
        input.name = 'content';
        input.value = newText;

        form.appendChild(input);
        document.body.appendChild(form);
        form.submit();
      }
    }
  }

  function updateWordCount(textarea) {
    const text = textarea.value.trim();
    const words = text ? text.split(/\s+/).length : 0;
    const counterDisplay = textarea.parentElement.querySelector('.word-count');

    counterDisplay.innerText = words;

    if (words < 30) {
      counterDisplay.style.color = "var(--orange)";
    } else {
      counterDisplay.style.color = "#22c55e";
    }
  }

  function validateWordCount(form) {
    const text = form.querySelector('textarea[name="answer"]').value.trim();
    const words = text ? text.split(/\s+/).length : 0;

    if (words < 30) {
      alert("Your submission is too short! Please write at least 30 words. (Currently: " + words + ")");
      return false;
    }
    return true;
  }
</script>
  <script src="/static/reconnect/js/global_navbar.js"></script>
  <script src="/static/shared/dialogs.js"></script>
</body>
</html>







